(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};window.CheckoutMailcheck=function(){function t(){this.suggestionUnPickedCallback=e(this.suggestionUnPickedCallback,this),this.suggestionPickedCallback=e(this.suggestionPickedCallback,this),this.checkEmailCallback=e(this.checkEmailCallback,this)}return t.name="CheckoutMailcheck",t.prototype.initialize=function(){return this.insertEmailNode(),this._registerCallbacks()},t.prototype.insertEmailNode=function(){return this.emailNode().insert("<p id='email_correction' style='display:none'></p>")},t.prototype.emailNode=function(){return $("email")},t.prototype.orderEmailNode=function(){return $("order_email")},t.prototype.emailCorrectionNode=function(){return $("email_correction")},t.prototype.newOrderNode=function(){return $("new_order")},t.prototype.commitOrderNode=function(){return $("commit-button")},t.prototype.getSuggestedEmail=function(){return $$("#email_correction .suggestion")[0]},t.prototype._registerCallbacks=function(){return this.orderEmailNode().on("blur",this.checkEmailCallback),this.emailCorrectionNode().on("click",".correction",this.suggestionPickedCallback),this.commitOrderNode().on("click",this.suggestionUnPickedCallback)},t.prototype.checkEmailCallback=function(){var e,t,o;return this.emailCorrectionNode().hide(),e=this.orderEmailNode().getValue(),(t=this.checkEmail(e))?(o="Did you mean <span class='suggestion'><a href='#' class='correction'>"+t.full+"</a></span>?",this.emailCorrectionNode().update(o),this.emailCorrectionNode().show()):void 0},t.prototype.checkEmail=function(e){var t,o,i;return t=["gmail.com","comcast.net","verizon.net","sbcglobal.net","ymail.com","aol.com","att.net","me.com","qq.com","msn.com","mac.com","btinternet.com","bigpond.com","google.com","rocketmail.com","icloud.com"],o=["yahoo","hotmail","mail","live","outlook","gmx"],i=["com","ca","us","de","at","be","dk","hk","nl","se","es","fr","gr","it","ie","ch","no","cz","in","com.au","net","net.au","org","info","edu","gov","biz","mil","co.uk","co.jp","co.nz"],Kicksend.mailcheck.run({email:e,domains:t,secondLevelDomains:o,topLevelDomains:i})},t.prototype.suggestionPickedCallback=function(e){return this.log("success",this.orderEmailNode().getValue()),this.orderEmailNode().setValue(this.getSuggestedEmail().innerText),this.emailCorrectionNode().hide(),Event.stop(e)},t.prototype.suggestionUnPickedCallback=function(){return this.emailCorrectionNode().visible()?this.log("failure",this.getSuggestedEmail().innerText):void 0},t.prototype.log=function(e,t){var o;return o="<input type='hidden' name='mailcheck_"+e+"' value='"+t+"' />",this.newOrderNode().insert(o)},t}()}).call(this);